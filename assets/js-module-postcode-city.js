/*
	Returns city name based on postcode
	@param string postcode
	@return string
*/

var postcodeToCity = (function() {
	var postcodesRange = {
		sydney_metro: "2176,2046,2763,2749,2015,2020,2234,2100,2218,2038,2050,2205,2148,2064,2193,2168,2131,2134,2141,2142,2144,2171,2107,2093,2094,2041,2216,2019,2035,2036,2190,2200,2198,2000,2207,2197,2153,2104,2086,2099,2018,2155,2119,2120,2191,2023,2192,2206,2085,2747,2217,2208,2209,2220,2222,2770,2143,2147,2767,2221,2113,2022,2026,2226,2177,2111,2164,2137,2024,2230,2132,2135,2136,2166,2060,2062,2065,2006,2042,2048,2194,2165,2229,2118,2151,2163,2069,2154,2068,2170,2175,2178,2021,2067,2126,2161,2162,2008,2105,2748,2031,2761,2097,2760,2138,2139,2145,2034,2089,2090,2133,2096,2032,2027,2010,2011,2114,2112,2219,2028,2030,2047,2084,2203,2204,2117,2213,2071,2070,2766,2122,2174,2101,2750,2121,2115,2759,2043,2095,2037,2087,2768,2072,2160,2232,2227,2228,2045,2150,2173,2129,2140,2110,2102,2224,2033,2052,2061,2231,2195,2066,2040,2049,2210,2109,2212,2214,2103,2223,2088,2196,2127,2106,2076,2152,2074,2063,2146,2225,2025,2211,2108,2125,2172,2073,2009,2016,2762,2029,2039,2116,2092,2128,2075,2044,2130,2769,2007,2017,2199",
      	sydney_south: "2560,2557,2575,2555,2571,2565,2574,2570,2559,2566,2576,2556,2558,2567,2568,2569,2564,2563,2572,2573",
      	newcastle: "2320,2326,2289,2321,2316,2283,2284,2323,2324,2300,2278,2280,2290,2322,2287,2281,2292,2308,2285,2318,2294,2303,2315,2309,2282,2295,2298,2296,2302,2291,2286,2299,2306,2304,2305,2319,2293,2317,2307,2297",
		sydney_regional: "2753,2156,2159,2077,2179,2765,2081,2082,2774,2756,2157,2158,2233,2776,2773,2167,2745,2777,2079,2080,2754",
		central_coast: "2250,2251,2256,2257,2258,2259,2260,2261,2262,2263,2264,2265,2267",
      	canberra: "2600-2607,2609,2611,2612,2614-2621,2900,2902-2906,2911-2914",
		melbourne: "3000-3006,3008,3010-3013,3015,3016,3018-3023,3025-3034,3036,3038-3062,3064,3068,3070-3076,3078,3079,3081-3087,3093,3101-3111,3121-3133,3141-3151,3161-3163,3165-3171,3181-3194,3202,3204-3207,3800,3802,3803",
		geelong: "3214-3220,3222-3227",
		brisbane: "4000,4005-4014,4018,4030-4032,4034,4035,4051,4053-4055,4059-4061,4064-4070,4073-4078,4101-4125,4127,4128,4131,4132,4151-4161.4169,4170-4174,4178,4179,4300,4301",
		sunshine_coast: "4551,4556-4560,4564,4572,4573,4575",
		gold_coast: "2485,2486,4211,4213-4221,4223-4228,4230,4875"
	};
	var getCity = function(postcode) {
		var city = '';
		$.each(postcodesRange, function(cityName, postcodeStringArray) {
			if($.inArray(postcode.toString(), postcodeList(postcodeStringArray)) != -1)
			{
				city = cityName.toUpperCase();
              	city = city.replace(/\_/g, ' ');
			}
		});

		return city;
	}

	var postcodeList = function(postcodesData) {
		var postCodesArray = postcodesData.split(','),//Split them using comma(,) and store the data
			postCodesRangeArray = [];

		/* Loop through the postcodes array and split them again using hyphen(-) */
		$.each(postCodesArray, function(i, data) {
			dataSplitArray = [];
			dataSplitArray = data.split('-');
			if($.isArray(dataSplitArray) && dataSplitArray.length > 1)
			{
				for(var i = dataSplitArray[0]; i <= dataSplitArray[1]; i++)
				{
					postCodesRangeArray.push(i.toString());
				}
			} else {
				postCodesRangeArray.push(dataSplitArray[0]);
			}
		});

		return postCodesRangeArray;
	}

	return {
		getCity: getCity,
		postcodeList: postcodeList
	}
})();